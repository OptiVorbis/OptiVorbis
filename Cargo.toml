[workspace]
members = ["packages/*"]
default-members = ["packages/optivorbis", "packages/optivorbis_cli"]

[workspace.package]
authors = ["Alejandro Gonz√°lez <me@alegon.dev>"]
version = "0.1.2"
homepage = "https://optivorbis.github.io/OptiVorbis"
repository = "https://github.com/OptiVorbis/OptiVorbis"
keywords = ["audio", "ogg", "vorbis", "optimization", "compression"]
categories = ["compression", "multimedia::audio"]
edition = "2021"
rust-version = "1.64"

[workspace.dependencies]
optivorbis = { version = "0.1.2", path = "packages/optivorbis" }
vorbis_bitpack = { version = "0.1.1", path = "packages/vorbis_bitpack" }
log = "0.4.17"

[profile.release]
lto = "fat"
codegen-units = 1
panic = "abort"
strip = "symbols"

[profile.fuzzing]
inherits = "release"
panic = "unwind"
overflow-checks = true

[profile.bench]
inherits = "release"
panic = "unwind"
debug = true
strip = "none"

[patch.crates-io]
# Use a newer commit of wasm-bindgen that has a PR for a critical regression merged.
# See: https://github.com/rustwasm/wasm-pack/pull/1224
wasm-bindgen = { git = "https://github.com/rustwasm/wasm-bindgen", rev = "9958e2ec" }
