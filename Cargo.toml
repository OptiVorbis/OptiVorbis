[workspace]
members = ["packages/*"]
default-members = ["packages/optivorbis", "packages/optivorbis_cli"]
resolver = "2"

[workspace.package]
authors = ["Alejandro Gonz√°lez <me@alegon.dev>"]
version = "0.1.4"
homepage = "https://optivorbis.github.io/OptiVorbis"
repository = "https://github.com/OptiVorbis/OptiVorbis"
keywords = ["audio", "ogg", "vorbis", "optimization", "compression"]
categories = ["compression", "multimedia::audio"]
edition = "2021"
rust-version = "1.70"

[workspace.dependencies]
optivorbis = { version = "0.1.4", path = "packages/optivorbis" }
vorbis_bitpack = { version = "0.1.1", path = "packages/vorbis_bitpack" }
log = "0.4.20"

[patch.crates-io]
# Temporarily use a newer ogg crate commit with a page checksum retrieval
# feature we need. Related PR:
# https://github.com/RustAudio/ogg/pull/38
ogg = { git = "https://github.com/RustAudio/ogg", rev = "f22b096a" }

[profile.release]
lto = "fat"
codegen-units = 1
panic = "abort"
strip = "symbols"

[profile.fuzzing]
inherits = "release"
panic = "unwind"
overflow-checks = true

[profile.bench]
inherits = "release"
panic = "unwind"
debug = true
strip = "none"
